// Copyright 2019 Google LLC

// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at

//     https://www.apache.org/licenses/LICENSE-2.0

// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

___INFO___

{
  "displayName": "E-Space Surveys",
  "description": "Keep track of customer satisfaction by using e-space simple surverys.",
  "categories": ["SURVEY"],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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",
    "displayName": "E-space",
    "id": "espace"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "websiteKey",
    "displayName": "Website key",
    "simpleValueType": true,
    "help": "You can find your website key under Data Collector -> Survey -> Distributions."
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_referrer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "websiteKey",
    "displayName": "Website key",
    "simpleValueType": true,
    "help": "You can find your website key under Data Collector -> Survey -> Distributions."
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://script.e-space.se/*.min.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const inject = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');

// Survey script to load
const script = "https://script.e-space.se/" + encodeUriComponent(data.websiteKey) + ".min.js";

inject(script, data.gtmOnSuccess, data.gtmOnFailure);


___NOTES___

Created on 10/16/2019, 2:16:58 PM
 }
        }
      ]
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const queryPermission = require('queryPermission');
const getReferrerUrl = require('getReferrerUrl');
let referrer;
if (queryPermission('get_referrer', 'query')) {
  referrer = getReferrerUrl('queryParams');
}

var log = require('logToConsole');
log('data =', data);

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___NOTES___

Created on 9/2/2019, 1:02:37 PM
